!function(e){jQuery.fn.extend({megaMobileMenu:function(s){var n={resetMenu:!1,menuClass:".mobile-mega-menu",changeToggleText:!0,toogleTextOnClose:"Close Menu",enableWidgetRegion:!1},t=e.extend(n,s);return this.each(function(){var s=250,n=e("a.toggle-menu").html();e(t.menuClass+" ul ul").before('<a class="toggle" href="#"><div class="arrow">Next</div></a>').siblings("a:first-of-type").addClass("has-toggle"),e(t.menuClass+" ul ul").prepend('<li><a class="back-button" href="#">Back</a></li>'),e("html, body").on("touchstart click",function(){e("html, body").stop()});var i=-1;if(e(t.menuClass+" ul").each(function(){i=i>e(this).height()?i:e(this).height()}),e(t.menuClass).css("min-height",i+50).hide(),t.enableWidgetRegion===!0){var l=e(t.menuClass+" .widget-region").detach();e(t.menuClass+" ul:first-child").append(l)}e("a.toggle-menu").click(function(i){i.preventDefault(),e(t.menuClass+" ul:first-child").hasClass("has-been-viewed")||e(t.menuClass+" ul:first-child").toggleClass("is-in-view"),e(this).toggleClass("extended"),t.changeToggleText===!0&&(e(this).hasClass("extended")?e(this).html(t.toogleTextOnClose):e(this).hasClass("extended")||e(this).html(n)),t.resetMenu===!0?e(t.menuClass).fadeIn(1,function(){e(t.menuClass).toggleClass("open").promise().done(function(){e(t.menuClass).hasClass("open")||(e(t.menuClass).fadeOut(),setTimeout(function(){e(t.menuClass+" ul").removeClass("is-in-view has-been-viewed")},s))})}):e(t.menuClass).fadeIn(1,function(){e(t.menuClass).toggleClass("open").promise().done(function(){e(t.menuClass).hasClass("open")||e(t.menuClass).fadeOut()})})}),e("a.toggle").click(function(n){n.preventDefault(),setTimeout(function(){e("html, body").animate({scrollTop:0},s)},s),e(this).siblings("ul:first-of-type").addClass("is-in-view"),e(this).parents().siblings("li").find("ul").hide(),e(this).siblings("ul").show(),e(this).parents("ul:first-of-type").addClass("has-been-viewed").removeClass("is-in-view")}),e("a.back-button").click(function(s){s.preventDefault(),e(this).parents("ul.is-in-view").closest("ul.has-been-viewed").toggleClass("has-been-viewed is-in-view").promise().done(function(){e("ul.is-in-view ul.is-in-view").toggleClass("is-in-view")})}),e("html").hasClass("csstransitions")||(e("a.toggle-menu").click(function(n){n.preventDefault(),e(t.menuClass).toggleClass("open-modernizer",s)}),e("a.toggle").click(function(n){n.preventDefault(),e(t.menuClass+" ul").animate({right:"+=100%"},s)}),e("a.back-button").click(function(n){n.preventDefault(),e(t.menuClass+" ul").animate({right:"-=100%"},s)}))})}})}(jQuery);