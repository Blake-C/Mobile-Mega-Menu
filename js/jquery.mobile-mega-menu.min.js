!function(e){jQuery.fn.extend({mobileMegaMenu:function(i){var n={changeToggleText:!1,enableWidgetRegion:!1,prependCloseButton:!1,stayOnActive:!0,toogleTextOnClose:"Close Menu"},t=e.extend(n,i);return this.each(function(){var i=250,n=e("a.toggle-menu").html(),s='<a class="toggle" href="#"><div class="arrow">Next</div></a>',l='<li><a class="back-button" href="#">Back</a></li>',a='<li><a class="close-button toggle-menu" href="#">Close Menu</a></li>',o=e(".mobile-mega-menu");if(o.find("ul ul").before(s).siblings("a:first-of-type").addClass("has-toggle"),o.find("ul ul").prepend(l),t.prependCloseButton&&o.find("ul").closest("ul").prepend(a),e("html, body").on("touchstart click",function(){e("html, body").stop()}),t.enableWidgetRegion){var u=o.find(".widget-region").detach();o.find("ul:first").append(u)}var d=-1;if(o.find("ul").each(function(){d=d>e(this).height()?d:e(this).height()}),o.css("min-height",d+50).addClass("remove"),t.stayOnActive){var c=window.location.href,f=c.replace("#","");o.find("ul li a").filter(function(){return this.href===f}).addClass("active"),o.find("a.active").closest("ul").addClass("is-in-view").parents("ul").addClass("has-been-viewed"),o.find("a.active").closest("ul").parents().siblings("li").find("ul").hide()}var r=e("a.toggle-menu");r.click(function(s){s.preventDefault(),o.find("ul:first-child").hasClass("has-been-viewed")||o.find("ul:first-child").toggleClass("is-in-view"),t.changeToggleText&&(o.hasClass("open")?o.hasClass("open")&&e("a.toggle-menu").html(n):e("a.toggle-menu").html(t.toogleTextOnClose)),o.toggleClass("open").delay(i).toggleClass("remove")});var g=o.find("a.toggle");g.click(function(n){n.preventDefault(),setTimeout(function(){e("html, body").animate({scrollTop:0},i)},i),e(this).siblings("ul:first-of-type").addClass("is-in-view"),e(this).parents().siblings("li").find("ul").hide(),e(this).siblings("ul").show(),e(this).parents("ul:first-of-type").addClass("has-been-viewed").removeClass("is-in-view")});var h=o.find("a.back-button");h.click(function(i){i.preventDefault(),e(this).parents("ul.is-in-view").closest("ul.has-been-viewed").toggleClass("has-been-viewed is-in-view").promise().done(function(){o.find("ul.is-in-view ul.is-in-view").toggleClass("is-in-view")})}),e("html").hasClass("csstransitions")||(r.click(function(e){e.preventDefault(),o.toggleClass("open-modernizer",i)}),g.click(function(e){e.preventDefault(),o.find("ul").animate({right:"+=100%"},i)}),h.click(function(e){e.preventDefault(),o.find("ul").animate({right:"-=100%"},i)}))})}})}(jQuery);