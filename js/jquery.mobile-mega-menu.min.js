!function(e){jQuery.fn.extend({mobileMegaMenu:function(i){var n={changeToggleText:!1,enableWidgetRegion:!1,prependCloseButton:!1,stayOnActive:!0,toogleTextOnClose:"Close Menu"},t=e.extend(n,i);return this.each(function(){var i=250,n=e("a.toggle-menu").html(),s='<a class="next-button" href="#"><div class="arrow">Next</div></a>',l='<li><a class="back-button" href="#">Back</a></li>',a='<li><a class="close-button toggle-menu" href="#">Close Menu</a></li>',o=-1,u=e(".mobile-mega-menu");u.find("ul ul").before(s).siblings("a:first-of-type").addClass("has-next-button"),u.find("ul ul").prepend(l),t.prependCloseButton&&u.find("ul").closest("ul").prepend(a);var d=e("a.toggle-menu"),c=u.find("a.next-button"),f=u.find("a.back-button");if(e("html, body").on("touchstart click",function(){e("html, body").stop()}),t.enableWidgetRegion){var r=u.find(".widget-region").detach();u.find("ul:first").append(r)}if(u.find("ul").each(function(){o=o>e(this).height()?o:e(this).height()}),u.css("min-height",o+50).addClass("remove"),t.stayOnActive){var h=window.location.href,g=h.replace("#","");u.find("ul li a").filter(function(){return this.href===g}).addClass("active"),u.find("a.active").closest("ul").addClass("is-in-view").parents("ul").addClass("has-been-viewed"),u.find("a.active").closest("ul").parents().siblings("li").find("ul").hide()}d.click(function(s){s.preventDefault(),u.find("ul:first-child").hasClass("has-been-viewed")||u.find("ul:first-child").toggleClass("is-in-view"),t.changeToggleText&&(u.hasClass("open")?u.hasClass("open")&&e("a.toggle-menu").html(n):e("a.toggle-menu").html(t.toogleTextOnClose)),u.toggleClass("open").delay(i).toggleClass("remove")}),c.click(function(n){n.preventDefault(),setTimeout(function(){e("html, body").animate({scrollTop:0},i)},i),e(this).siblings("ul:first-of-type").addClass("is-in-view"),e(this).parents().siblings("li").find("ul").hide(),e(this).siblings("ul").show(),e(this).parents("ul:first-of-type").addClass("has-been-viewed").removeClass("is-in-view")}),f.click(function(i){i.preventDefault(),e(this).parents("ul.is-in-view").closest("ul.has-been-viewed").toggleClass("has-been-viewed is-in-view").promise().done(function(){u.find("ul.is-in-view ul.is-in-view").toggleClass("is-in-view")})}),e("html").hasClass("csstransitions")||(d.click(function(e){e.preventDefault(),u.toggleClass("open-modernizer",i)}),c.click(function(e){e.preventDefault(),u.find("ul").animate({right:"+=100%"},i)}),f.click(function(e){e.preventDefault(),u.find("ul").animate({right:"-=100%"},i)}))})}})}(jQuery);