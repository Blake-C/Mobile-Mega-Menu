!function(e){jQuery.fn.extend({mobileMegaMenu:function(i){var n={changeToggleText:!1,enableWidgetRegion:!1,prependCloseButton:!1,stayOnActive:!0,toogleTextOnClose:"Close Menu"},t=e.extend(n,i);return this.each(function(){var i=250,n='<a class="next-button" href="#"><div class="arrow">Next</div></a>',s='<li><a class="back-button" href="#">Back</a></li>',l='<li><a class="close-button toggle-menu" href="#">Close Menu</a></li>',a=-1,o=e(".mobile-mega-menu"),u=e("a.toggle-menu").html();o.find("ul ul").before(n).siblings("a:first-of-type").addClass("has-next-button"),o.find("ul ul").prepend(s),t.prependCloseButton&&o.find("ul").closest("ul").prepend(l);var d=e("a.toggle-menu"),c=o.find("a.next-button"),f=o.find("a.back-button");if(e("html, body").on("touchstart click",function(){e("html, body").stop()}),t.enableWidgetRegion){var r=o.find(".widget-region").detach();o.find("ul:first").append(r)}if(o.find("ul").each(function(){a=a>e(this).height()?a:e(this).height()}),o.css("min-height",a+50).addClass("remove"),t.stayOnActive){var h=window.location.href,g=h.replace("#","");o.find("ul li a").filter(function(){return this.href===g}).addClass("active"),o.find("a.active").closest("ul").addClass("is-in-view").parents("ul").addClass("has-been-viewed"),o.find("a.active").closest("ul").parents().siblings("li").find("ul").hide()}d.click(function(n){n.preventDefault(),o.find("ul:first-child").hasClass("has-been-viewed")||o.find("ul:first-child").toggleClass("is-in-view"),t.changeToggleText&&(o.hasClass("open")?o.hasClass("open")&&e("a.toggle-menu").html(u):e("a.toggle-menu").html(t.toogleTextOnClose)),o.toggleClass("open").delay(i).toggleClass("remove")}),c.click(function(n){n.preventDefault(),setTimeout(function(){e("html, body").animate({scrollTop:0},i)},i),e(this).siblings("ul:first-of-type").addClass("is-in-view"),e(this).parents().siblings("li").find("ul").hide(),e(this).siblings("ul").show(),e(this).parents("ul:first-of-type").addClass("has-been-viewed").removeClass("is-in-view")}),f.click(function(i){i.preventDefault(),e(this).parents("ul.is-in-view").closest("ul.has-been-viewed").toggleClass("has-been-viewed is-in-view").promise().done(function(){o.find("ul.is-in-view ul.is-in-view").toggleClass("is-in-view")})}),e("html").hasClass("csstransitions")||(d.click(function(e){e.preventDefault(),o.toggleClass("open-modernizer",i)}),c.click(function(e){e.preventDefault(),o.find("ul").animate({right:"+=100%"},i)}),f.click(function(e){e.preventDefault(),o.find("ul").animate({right:"-=100%"},i)}))})}})}(jQuery);