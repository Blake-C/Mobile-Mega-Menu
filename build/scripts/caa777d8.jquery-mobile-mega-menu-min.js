!function(a){jQuery.fn.extend({mobileMegaMenu:function(b){var c={changeToggleText:!1,enableWidgetRegion:!1,prependCloseButton:!1,stayOnActive:!0,toogleTextOnClose:"Close Menu"},d=a.extend(c,b);return this.each(function(){var b=250,c='<a class="next-button" href="#"><div class="arrow">Next</div></a>',e='<li><a class="back-button" href="#">Back</a></li>',f='<li><a class="close-button toggle-menu" href="#">Close Menu</a></li>',g=-1,h=a(".mobile-mega-menu"),i=a("a.toggle-menu").html();h.find("ul ul").before(c).siblings("a:first-of-type").addClass("has-next-button"),h.find("ul ul").prepend(e),d.prependCloseButton&&h.find("ul").closest("ul").prepend(f);var j=a("a.toggle-menu"),k=h.find("a.next-button"),l=h.find("a.back-button");if(a("html, body").on("touchstart click",function(){a("html, body").stop()}),d.enableWidgetRegion){var m=h.find(".widget-region").detach();h.find("ul:first").append(m)}if(h.find("ul").each(function(){g=g>a(this).height()?g:a(this).height()}),h.css("min-height",g+50).addClass("remove"),d.stayOnActive){var n=window.location.href,o=n.replace("#","");h.find("ul li a").filter(function(){return this.href===o}).addClass("active"),h.find("a.active").closest("ul").addClass("is-in-view").parents("ul").addClass("has-been-viewed"),h.find("a.active").closest("ul").parents().siblings("li").find("ul").hide()}j.click(function(c){c.preventDefault(),h.find("ul:first-child").hasClass("has-been-viewed")||h.find("ul:first-child").toggleClass("is-in-view"),d.changeToggleText&&(h.hasClass("open")?h.hasClass("open")&&a("a.toggle-menu").html(i):a("a.toggle-menu").html(d.toogleTextOnClose)),h.toggleClass("open").delay(b).toggleClass("remove")}),k.click(function(c){c.preventDefault(),setTimeout(function(){a("html, body").animate({scrollTop:0},b)},b),a(this).siblings("ul:first-of-type").addClass("is-in-view"),a(this).parents().siblings("li").find("ul").hide(),a(this).siblings("ul").show(),a(this).parents("ul:first-of-type").addClass("has-been-viewed").removeClass("is-in-view")}),l.click(function(b){b.preventDefault(),a(this).parents("ul.is-in-view").closest("ul.has-been-viewed").toggleClass("has-been-viewed is-in-view").promise().done(function(){h.find("ul.is-in-view ul.is-in-view").toggleClass("is-in-view")})}),a("html").hasClass("csstransitions")||(j.click(function(a){a.preventDefault(),h.toggleClass("open-modernizer",b)}),k.click(function(a){a.preventDefault(),h.find("ul").animate({right:"+=100%"},b)}),l.click(function(a){a.preventDefault(),h.find("ul").animate({right:"-=100%"},b)}))})}})}(jQuery);